(function(){var k=$.isArray,h=function(a){return typeof a==="object"&&a!==null&&a},l=$.makeArray,o=$.each,q=function(a,c,b){if(a instanceof $.Observe)p([a],b._namespace);else a=k(a)?new $.Observe.List(a):new $.Observe(a);a.bind("change"+b._namespace,function(d){var e=$.makeArray(arguments);d=e.shift();e[0]=c==="*"?b.indexOf(a)+"."+e[0]:c+"."+e[0];$.event.trigger(d,e,b)});return a},p=function(a,c){for(var b,d=0;d<a.length;d++)(b=a[d])&&b.unbind&&b.unbind("change"+c)},s=0,j=null,t=function(){if(!j){j=
[];return true}},g=function(a,c,b){if(!a._init)if(j)j.push({t:a,ev:c,args:b});else return $.event.trigger(c,b,a,true)},u=0,v=function(){var a=j.length,c=j.slice(0),b;j=null;u++;for(var d=0;d<a;d++){b=c[d];$.event.trigger({type:b.ev,batchNum:u},b.args,b.t)}},m=function(a,c,b){a.each(function(d,e){b[d]=h(e)&&typeof e[c]=="function"?e[c]():e});return b};$.Class("jQuery.Observe",{init:function(a){this._data={};this._namespace=".observe"+ ++s;this._init=true;this.attrs(a);delete this._init},attr:function(a,
c){if(c===undefined)return this._get(a);else{this._set(a,c);return this}},each:function(){return o.apply(null,[this.__get()].concat(l(arguments)))},removeAttr:function(a){a=k(a)?a:a.split(".");var c=a.shift(),b=this._data[c];if(a.length)return b.removeAttr(a);else{delete this._data[c];g(this,"change",[c,"remove",undefined,b]);return b}},_get:function(a){a=k(a)?a:(""+a).split(".");var c=this.__get(a.shift());return a.length?c?c._get(a):undefined:c},__get:function(a){return a?this._data[a]:this._data},
_set:function(a,c){var b=k(a)?a:(""+a).split(".");a=b.shift();var d=this.__get(a);if(h(d)&&b.length)d._set(b,c);else if(b.length)throw"jQuery.Observe: set a property on an object that does not exist";else if(c!==d){b=this.__get().hasOwnProperty(a)?"set":"add";this.__set(a,h(c)?q(c,a,this):c);g(this,"change",[a,b,c,d]);d&&p([d],this._namespace)}},__set:function(a,c){this._data[a]=c;a in this.constructor.prototype||(this[a]=c)},bind:function(){$.fn.bind.apply($([this]),arguments);return this},unbind:function(){$.fn.unbind.apply($([this]),
arguments);return this},serialize:function(){return m(this,"serialize",{})},attrs:function(a,c){if(a===undefined)return m(this,"attrs",{});a=$.extend(true,{},a);var b,d=t();for(b in this._data){var e=this._data[b],f=a[b];if(f===undefined)c&&this.removeAttr(b);else{if(h(e)&&h(f))e.attrs(f,c);else e!=f&&this._set(b,f);delete a[b]}}for(b in a){f=a[b];this._set(b,f)}d&&v()}});var r=jQuery.Observe("jQuery.Observe.List",{init:function(a,c){this.length=0;this._namespace=".list"+ ++s;this._init=true;this.bind("change",
this.proxy("_changes"));this.push.apply(this,l(a||[]));$.extend(this,c);this.comparator&&this.sort();delete this._init},_changes:function(a,c,b,d,e){if(this.comparator&&/^\d+./.test(c)){var f=+/^\d+/.exec(c)[0],i=this[f],n=this.sortedIndex(i);if(n!==f){[].splice.call(this,f,1);[].splice.call(this,n,0,i);g(this,"move",[i,n,f]);a.stopImmediatePropagation();g(this,"change",[c.replace(/^\d+/,n),b,d,e]);return}}if(c.indexOf(".")===-1)if(b==="add")g(this,b,[d,+c]);else b==="remove"&&g(this,b,[e,+c])},sortedIndex:function(a){var c=
a.attr(this.comparator),b=0,d;for(d=0;d<this.length;d++)if(a===this[d])b=-1;else if(c<=this[d].attr(this.comparator))return d+b;return d+b},__get:function(a){return a?this[a]:this},__set:function(a,c){this[a]=c},serialize:function(){return m(this,"serialize",[])},splice:function(a,c){var b=l(arguments),d;for(d=2;d<b.length;d++){var e=b[d];if(h(e))b[d]=q(e,"*",this)}if(c===undefined)c=b[1]=this.length-a;d=[].splice.apply(this,b);if(c>0){g(this,"change",[""+a,"remove",undefined,d]);p(d,this._namespace)}b.length>
2&&g(this,"change",[""+a,"add",b.slice(2),d]);return d},attrs:function(a,c){if(a===undefined)return m(this,"attrs",[]);a=a.slice(0);for(var b=Math.min(a.length,this.length),d=t(),e=0;e<b;e++){var f=this[e],i=a[e];if(h(f)&&h(i))f.attrs(i,c);else f!=i&&this._set(e,i)}if(a.length>this.length)this.push(a.slice(this.length));else a.length<this.length&&c&&this.splice(a.length);d&&v()},sort:function(a,c){var b=this.comparator;[].sort.apply(this,b?[function(d,e){d=d[b];e=e[b];return d===e?0:d<e?-1:1}]:[]);
!c&&g(this,"reset")}}),w=function(a){return a[0]&&$.isArray(a[0])?a[0]:l(a)};o({push:"length",unshift:0},function(a,c){r.prototype[a]=function(){for(var b=w(arguments),d=c?this.length:0,e=0;e<b.length;e++){var f=b[e];if(h(f))b[e]=q(f,"*",this)}if(b.length==1&&this.comparator){this.splice(this.sortedIndex(b[0]),0,b[0]);return this.length}e=[][a].apply(this,b);if(this.comparator&&b.length>1){this.sort(null,true);g(this,"reset",[b])}else g(this,"change",[""+d,"add",b,undefined]);return e}});o({pop:"length",
shift:0},function(a,c){r.prototype[a]=function(){var b=w(arguments),d=c&&this.length?this.length-1:0;b=[][a].apply(this,b);g(this,"change",[""+d,"remove",undefined,[b]]);b&&b.unbind&&b.unbind("change"+this._namespace);return b}});r.prototype.indexOf=[].indexOf||function(a){return $.inArray(a,this)};$.O=function(a,c){return k(a)||a instanceof $.Observe.List?new $.Observe.List(a,c):new $.Observe(a,c)}})(jQuery);
